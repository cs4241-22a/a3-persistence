<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Assignment 3 | Home</title>
    <meta
      charset="utf-8"
      name="viewport"
      content="width=device-width, initial-scale=1"
    />
    <meta
      name="description"
      content="Cole's super duper fun and easy to use assignment and course manager developed for Assignment 3 of CS4241."
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/purecss@2.1.0/build/pure-min.css"
      integrity="sha384-yHIFVG6ClnONEA5yB5DJXfW2/KC173DIQrYoZMEtBvGzmf0PKiGyNEqe9N6BNDBH"
      crossorigin="anonymous"
    />
    <script src="./js/scripts.js"></script>
  </head>
  <body>
    <style scoped="">
      .button-success {
        color: white;
        border-radius: 4px;
        background: rgb(21, 52, 101);
        text-shadow: 0 1px 1px rgba(0, 0, 0, 0.2);
      }
    </style>
    <div class="pure-g">
      <div class="pure-u-1-4"></div>
      <div class="pure-u-1-2">
        <h1>Assignment Tracker v02</h1>
        <h2>Developed by Cole Ouellette</h2>
      </div>
      <div class="pure-u-1-4"></div>

      <div class="pure-u-1-4"></div>
      <div class="pure-u-1-2">
        <form
          class="pure-form pure-form-stacked"
          id="courseForm"
          action="/add-course"
          method="POST"
        >
          <fieldset>
            <legend>Add a Course</legend>
            <input
              type="text"
              id="cname"
              name="cname"
              placeholder="Untitled Course"
              required
            />
            <label for="term">Term</label>
            <select name="term" id="term">
              <option value="a">A</option>
              <option value="b">B</option>
              <option value="c">C</option>
              <option value="d">D</option>
            </select>
            <label for="weekly">How many classes per week?</label>
            <input type="number" id="weekly" name="weekly" required />
            <div class="buttons">
              <button class="pure-button" type="reset">Cancel</button>
              <button
                class="button-success pure-button"
                type="submit"
                id="submitCourses"
              >
                Submit
              </button>
            </div>
          </fieldset>
        </form>

        <% let today = new Date(); %> <% let dd =
        String(today.getDate()).padStart(2, "0"); %> <% let mm =
        String(today.getMonth() + 1).padStart(2, "0"); %> <% let yyyy =
        today.getFullYear(); %> <% today = new Date(mm + "/" + dd + "/" + yyyy);
        %>
        <br />
        <aside>
          <table class="pure-table pure-table-bordered">
            <tr id="coursesHeader">
              <th>Course Name</th>
              <th>Classes Left</th>
            </tr>

            <tbody id="courseTab">
              <% courses.forEach(object => { %> <% let termEnd = new Date(); %>
              <% switch (object.term) { case "a": %> <% termEnd = new
              Date("10/14/2022"); %> <% break; case "b": %> <% termEnd = new
              Date("12/17/2022"); %> <% break; case "c": %> <% termEnd = new
              Date("03/04/2023"); %> <% break; case "d": %> <% termEnd = new
              Date("05/04/2023"); %> <% break; default: %> <% termEnd = new
              Date("00/00/0000"); %> <% } %> <% let timeDiff = termEnd.getTime()
              - today.getTime(); %> <% let dayDiff = timeDiff / (1000 * 3600 *
              24); %> <% let remaining = (dayDiff / 7) * object.weekly; %>

              <tr>
                <td><%= object.cname%></td>
                <td><%= Math.round(remaining)%></td>
              </tr>

              <% }) %>
            </tbody>
          </table>
        </aside>
      </div>
      <div class="pure-u-1-4"></div>

      <div class="pure-u-1-4"></div>
      <div class="pure-u-1-2">
        <br />
        <form
          class="pure-form pure-form-stacked"
          id="assignForm"
          action="/add-assignment"
          method="POST"
        >
          <fieldset>
            <legend>Add an Assignment</legend>
            <label for="coursesel">Course</label>
            <select name="coursesel" id="coursesel">
              <% courses.forEach(object => { %>
              <option value="<%= object.cname%>"><%= object.cname%></option>
              ; <% }) %>
            </select>
            <input
              type="text"
              id="assignment"
              name="assignment"
              placeholder="Untitled Assignment"
              required
            />
            <label for="due">Due Date</label>
            <input type="date" id="due" name="due" required />
            <select name="priority" id="priority">
              <option value="low">Low</option>
              <option value="med">Medium</option>
              <option value="high">High</option>
            </select>
            <div class="buttons">
              <button class="pure-button" type="reset">Cancel</button>
              <button
                class="button-success pure-button"
                type="submit"
                id="submitAssignments"
              >
                Submit
              </button>
            </div>
          </fieldset>
        </form>
        <br />

        <aside>
          <table class="pure-table pure-table-bordered">
            <tr id="assignmentsHeader">
              <th>
                <input
                  type="checkbox"
                  placeholder="Header Checkbox Placeholder"
                  id="headerbox"
                  name="headerbox"
                  disabled="disabled"
                />
              </th>
              <th>Assignment</th>
              <th>Course</th>
              <th>Due Date</th>
              <th>Priority</th>
            </tr>

            <tbody id="assignmentsTab">
              <% assignments.forEach(object => { %>
              <tr>
                <td>
                  <input
                    placeholder="Delete Assignment"
                    type="checkbox"
                    id="${i}"
                    name="${i}"
                    onclick="delAssignment(this)"
                  />
                </td>
                <td><%= object.assignment %></td>
                <td><%= object.coursesel %></td>
                <td><%= object.due %></td>
                <td><%= object.priority %></td>
              </tr>

              <% }) %>
            </tbody>
          </table>
        </aside>
      </div>
      <div class="pure-u-1-4"></div>
    </div>
  </body>
</html>
